!function(t){var i={};function s(e){if(i[e])return i[e].exports;var h=i[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,s),h.l=!0,h.exports}s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)s.d(e,h,function(i){return t[i]}.bind(null,h));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=0)}([function(t,i,s){"use strict";s.r(i);const e={canvas:document.querySelector(".myCanvas"),ctx:document.querySelector(".myCanvas").getContext("2d"),textIn:document.getElementById("word"),feedback:document.querySelector(".gameState"),timer:document.querySelector(".timer")},h=t=>{let i,s,e;return s=1,i=[],e=[],t.forEach(t=>i.push(t.y)),i.forEach(h=>{let l;l=Math.abs(h-i[s]),l>t[0].h/2&&e.push(!1),e.push(!0),s++}),l(e)};let l=t=>!t.includes(!1);const o=e.canvas,n=e.ctx,a=(t=1e3,i=600)=>{o.width=t,o.height=i};class c{constructor(t,i,s,e,h,l,o,n,a,c){this.x=t,this.y=i,this.w=s,this.h=e,this.lw=h,this.lh=l,this.rectColor=o,this.letterColor=n,this.text=a,this.id=c,this.drag=!1}rectDraw(){n.fillStyle=this.rectColor,n.fillRect(this.x,this.y,this.w,this.h)}letterDraw(){n.fillStyle=this.letterColor,n.fillText(this.text,this.lw,this.lh)}fontSize(){this.px=.95*this.h,((t=70)=>{n.font=t+"px Roboto Condensed"})(this.px)}calcCorners(){this.x2=this.x+this.w,this.y2=this.y+this.h}withinCanvas(t,i){this.x<0||this.x2>t||this.y<0||this.y2>i?this.inCanvas=!1:this.inCanvas=!0}isDrag(t){t.offsetX>this.x&&t.offsetX<this.x2&&t.offsetY>this.y&&t.offsetY<this.y2?(this.drag=!0,console.log(this.text+" is ready to drag!")):this.drag=!1}dragging(t){this.drag&&(e.ctx.clearRect(this.x,this.y,this.w,this.h),this.x=t.offsetX-this.w/2,this.x2=t.offsetX+this.w/2,this.y=t.offsetY-this.h/2,this.y2=t.offsetY+this.h/2,this.rectColor="#229552",this.lw=this.x+.33*this.w,this.lh=this.y+.75*this.h)}draggingPulse(){if(this.drag){let t,i,s,e;t=this.w,i=this.h,s=10,e=s/100,this.dragPulseFn=setInterval(()=>{this.drag?this.w<1.5*t&&this.h<1.5*i?(this.w=t*(e+1),this.h=i*(e+1),s++):(this.w=t,this.h=i):(this.w=t,this.h=i,clearInterval(this.dragPulseFn))},50)}}isCollide(t){if(!this.drag){let i,s,e,h;this.left=this.x,this.right=this.x+this.w,this.top=this.y,this.bottom=this.y+this.h,t.forEach(t=>{if(this.id!=t.id){i=t.x,s=t.x+t.w,e=t.y,h=t.y+t.h;let l={1:"right",2:"left",3:"top",4:"bottom"};h>this.top&&h<this.bottom||e<this.bottom&&h>this.bottom?i<this.right&&i>this.left?(this.collide=l[1],this.collidingBlockEdge=i,console.log(`${this.text} is colliding with ${t.text} from ${this.collide}.`)):s>this.left&&s<this.right&&(this.collide=l[2],this.collidingBlockEdge=s,console.log(`${this.text} is colliding with ${t.text} from ${this.collide}.`)):s>this.left&&s<this.right||i<this.right&&i>this.left?h>this.top&&h<this.bottom?(this.collide=l[3],this.collidingBlockEdge=h,console.log(`${this.text} is colliding with ${t.text} from ${this.collide}.`)):e>this.bottom&&e<this.top&&(this.collide=l[4],this.collidingBlockEdge=e,console.log(`${this.text} is colliding with ${t.text} from ${this.collide}.`)):this.collide=!1}})}}colliding(){this.collide&&(e.ctx.clearRect(this.x,this.y,this.w,this.h),"right"===this.collide?this.x=this.collidingBlockEdge-this.w:"left"===this.collide?this.x=this.collidingBlockEdge:"top"===this.collide?this.y=this.collidingBlockEdge:this.y=this.collidingBlockEdge-this.h,this.lw=this.x+.33*this.w,this.lh=this.y+.75*this.h,this.rectDraw(),this.letterDraw())}push(t,i){this.inCanvas||(e.ctx.clearRect(this.x,this.y,this.w,this.h),"right"===this.collide?this.x=this.x+2:"left"===this.collide?this.x=this.x-2:"top"===this.collide?this.y=this.y-2:"bottom"===this.collide?this.y=this.y+2:(this.x=t/2-this.w/2,this.y=i/2-this.h/2),this.lw=this.x+.33*this.w,this.lh=this.y+.75*this.h)}resize(t,i,s,e,h){this.w=i/t+2,this.h=s/t,this.x=this.x*e,this.y=this.y*h,this.lw=this.x+.33*this.w,this.lh=this.y+.75*this.h,this.rectDraw(),this.letterDraw()}endCollide(){this.collide=!1}endDrag(){this.drag=!1,this.rectColor="#2ecc71",this.rectDraw(),this.letterDraw()}endDraggingPulse(){!1===this.drag&&clearInterval(this.dragPulseFn)}}const r=t=>{e.feedback.textContent=t?"Spell!":"You win!"};class d{constructor(){this.offset=Date.now(),this.delay=100}start(){const t=()=>{this.d=Date.now()-this.offset,e.timer.textContent=(this.d/1e3).toFixed(1)+" seconds"};this.interval||(this.interval=setInterval(t,this.delay))}stop(){clearInterval(this.interval),this.delay=null}}let g={};const f=()=>{window.requestAnimationFrame(f),g.blocks.forEach(t=>{t.calcCorners(),t.fontSize(),t.withinCanvas(e.canvas.width,e.canvas.height),t.rectDraw(),t.letterDraw()})},u=()=>{g.dragging=!1,g.blocks.forEach(t=>{t.endDrag(),t.push(e.canvas.width,e.canvas.height),t.endCollide()}),((t,i)=>{let s,e,l,o;return e=[],s=t.concat().sort((t,i)=>{if(t.x&&i.x)return t.x-i.x}),s.forEach(t=>{e.push(t.text),l=e.join("")}),o=(t,i,s)=>!(t!==i||!h(s)),o(l,i,s)})(g.blocks,g.answer)?(g.playing=!1,r(g.playing),g.stopwatch.stop()):(g.playing=!0,r(g.playing))};document.querySelector(".build").addEventListener("click",()=>{let t,i,s;t=e.textIn.value,e.textIn.value="",g={blocks:[],playing:!1,answer:"",inCanvas:[]},e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),console.log(e.canvas.width,e.canvas.height),g.answer=t,g.playing=!0,i=[...t],s=(t=>{let i,s,e=t.length;for(;0!==e;)0!==e&&(s=Math.floor(Math.random()*e),e-=1,i=t[e],t[e]=t[s],t[s]=i);return t})(i);let h=0;s.forEach(t=>{let i,l;i=e.canvas.width/(s.length+2),l=e.canvas.width/(s.length+2),g.blocks.push(new c(i+h*i,l,i,l,1.3*i+h*i,1.75*l,"#2ecc71","black",t,h)),h++}),f()}),e.canvas.addEventListener("mousedown",t=>{g.click=!0,g.playing&&(r(g.playing),g.stopwatch||(g.stopwatch=new d,g.stopwatch.start()),g.dragging=!1)}),e.canvas.addEventListener("mousemove",t=>{g.playing&&g.click&&(t=>{if(g.blocks.forEach(t=>g.inCanvas.push(t.inCanvas)),l(g.inCanvas)){(()=>{g.blocks.forEach(t=>{t.isCollide(g.blocks),t.colliding()})})(),g.dragging=!0,g.click&&g.playing&&g.dragging&&t.offsetX>g.blocks[0].w/2&&t.offsetX<e.canvas.width-g.blocks[0].w/2&&t.offsetY>g.blocks[0].h/2&&t.offsetY<e.canvas.height-g.blocks[0].h/2&&g.blocks.forEach(i=>{i.isDrag(t),i.dragging(t)})}g.inCanvas=[]})(t)}),e.canvas.addEventListener("mouseup",()=>{g.click=!1,g.playing&&u()}),window.addEventListener("load",()=>{g.playing=!1,e.canvas.width=.6*document.documentElement.clientWidth,e.canvas.height=.7*document.documentElement.clientHeight,a(e.canvas.width,e.canvas.height)}),window.addEventListener("resize",()=>{let t,i,s,h;t=e.canvas.width,i=e.canvas.height,e.canvas.width=.6*document.documentElement.clientWidth,e.canvas.height=.7*document.documentElement.clientHeight,s=e.canvas.width/t,h=e.canvas.height/i,a(e.canvas.width,e.canvas.height),g.blocks.forEach(t=>{t.resize(g.blocks.length,.7*e.canvas.width,.7*e.canvas.width,s,h)})})}]);